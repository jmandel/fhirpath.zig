{
  "meta": {
    "status": "implemented",
    "spec_notes": [
      "Path selection: paths navigate by composing concatenated labels (spec \u00a7Path selection)",
      "Collections are fundamental: each step returns a collection, flattening arrays along the way",
      "Environment variables: %name tokens refer to values passed by calling environment (spec \u00a7Environment variables)",
      "Delimited identifiers: backticks allow identifiers with special chars like hyphens (spec \u00a7Identifiers)"
    ],
    "todo": [
      "[x] Improve passing rate (4/4 passing)",
      "[ ] Add test for empty path (just $this or context reference)",
      "[ ] Add test for paths starting with type name (e.g., Patient.name)",
      "[ ] Add test for deeply nested array flattening",
      "[ ] Add test for delimited identifier with escape sequences"
    ]
  },
  "cases": [
    {
      "name": "simple path",
      "expr": "name.given",
      "input": {
        "name": {
          "given": [
            "Ann",
            "Bob"
          ]
        }
      },
      "expect": [
        {
          "type": "string",
          "value": "Ann"
        },
        {
          "type": "string",
          "value": "Bob"
        }
      ]
    },
    {
      "name": "array navigation",
      "expr": "name.given",
      "input": {
        "name": [
          {
            "given": [
              "Ann"
            ]
          },
          {
            "given": [
              "Bob"
            ]
          }
        ]
      },
      "expect": [
        {
          "type": "string",
          "value": "Ann"
        },
        {
          "type": "string",
          "value": "Bob"
        }
      ]
    },
    {
      "name": "env root",
      "expr": "%root.name.given",
      "input": {
        "ignored": true
      },
      "env": {
        "root": {
          "name": {
            "given": [
              "Ann"
            ]
          }
        }
      },
      "expect": [
        {
          "type": "string",
          "value": "Ann"
        }
      ]
    },
    {
      "name": "delimited identifier",
      "expr": "`given-name`",
      "input": {
        "given-name": "Ann"
      },
      "expect": [
        {
          "type": "string",
          "value": "Ann"
        }
      ]
    }
  ]
}
