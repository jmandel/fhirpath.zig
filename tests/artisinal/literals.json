{
  "meta": {
    "status": "drafted"
  },
  "_spec_summary": [
    "=== FHIRPath Literals (§4.1) ===",
    "FHIRPath expressions can contain literal values of the following types:",
    "",
    "=== Boolean ===",
    "Two literal values: true and false.",
    "These are the result of comparisons and can be combined with logical operators.",
    "",
    "=== String ===",
    "String literals are surrounded by single-quotes ('...').",
    "Max length: 2^31 - 1 characters.",
    "Escape sequences (ONLY these are recognized):",
    "  \\' → single-quote",
    "  \\\" → double-quote",
    "  \\` → backtick",
    "  \\r → carriage return (CR, U+000D)",
    "  \\n → line feed (LF, U+000A)",
    "  \\t → tab (U+0009)",
    "  \\f → form feed (U+000C)",
    "  \\\\ → backslash",
    "  \\uXXXX → Unicode character (4 hex digits)",
    "",
    "CRITICAL: Unrecognized escape sequences drop the backslash!",
    "  '\\p' → 'p' (backslash disappears)",
    "  '\\3' → '3'",
    "  '\\u005' → 'u005' (not 4 hex digits, so not Unicode escape)",
    "  '\\' at end → '' (empty, backslash is dropped)",
    "",
    "=== Integer ===",
    "Whole numbers in range -2^31 to 2^31 - 1.",
    "Examples: 0, 45, -5",
    "Note: The minus sign is the unary negation operator, not part of the literal.",
    "",
    "=== Long (STU) ===",
    "Whole numbers in range -2^63 to 2^63 - 1.",
    "Syntax: Integer literal followed by 'L' suffix (uppercase).",
    "Examples: 0L, 45L, -5L",
    "",
    "=== Decimal ===",
    "Real values with fixed-precision decimal.",
    "Range: (-10^28+1)/10^8 to (10^28-1)/10^8 with step 10^-8.",
    "Examples: 0.0, 3.14159265",
    "CRITICAL: Exponential notation is NOT supported!",
    "",
    "=== Date ===",
    "Date and partial date values in range @0001-01-01 to @9999-12-31.",
    "Syntax: @ followed by YYYY-MM-DD (month and day optional).",
    "Examples: @2014-01-25, @2014-01, @2014",
    "Separator required between provided components.",
    "Years must be present; months must be present if day is present.",
    "",
    "=== Time ===",
    "Time-of-day values in range @T00:00:00.000 to @T23:59:59.999.",
    "Syntax: @T followed by hh:mm:ss.fff (partial allowed).",
    "Examples: @T12:00, @T14:30:14.559",
    "NO timezone offset allowed in Time literals.",
    "",
    "=== DateTime ===",
    "Combined date/time values.",
    "Syntax: Date literal + T + time components + optional timezone.",
    "Timezone: (+|-)hh:mm format, or Z for UTC.",
    "Partial DateTime: Use trailing T after date (e.g., @2014T, @2014-01T).",
    "Examples: @2014-01-25T14:30:14.559, @2014-01-25T14:30:14.559Z, @2014T",
    "",
    "=== Quantity ===",
    "Number followed by unit string (quoted UCUM) or calendar keyword.",
    "Examples: 4.5 'mg', 100 '[degF]', 1 year, 4 days",
    "Calendar keywords: year/years, month/months, week/weeks, day/days,",
    "                   hour/hours, minute/minutes, second/seconds, millisecond/milliseconds",
    "",
    "=== Empty Collection ===",
    "The literal {} represents an empty collection.",
    "There is no null literal in FHIRPath."
  ],
  "_todo": [
    "[ ] Improve passing rate (39/54 passing)",
    "[ ] Implement Long literal parsing (0L, 45L, etc.)",
    "[ ] Fix string escape sequences (\\t, \\n, \\r, \\f not expanding)",
    "[ ] Implement Unicode escape (\\uXXXX) processing",
    "[ ] Implement calendar duration keyword parsing (1 year, 4 days)"
  ],
  "cases": [
    {
      "name": "boolean: true literal",
      "expr": "true",
      "input": {},
      "expect": [{"type": "boolean", "value": true}]
    },
    {
      "name": "boolean: false literal",
      "expr": "false",
      "input": {},
      "expect": [{"type": "boolean", "value": false}]
    },
    {
      "name": "string: simple literal",
      "expr": "'hello world'",
      "input": {},
      "expect": [{"type": "string", "value": "hello world"}]
    },
    {
      "name": "string: empty string",
      "expr": "''",
      "input": {},
      "expect": [{"type": "string", "value": ""}]
    },
    {
      "name": "string: escape single-quote",
      "expr": "'it\\'s a test'",
      "input": {},
      "expect": [{"type": "string", "value": "it's a test"}]
    },
    {
      "name": "string: escape double-quote",
      "expr": "'say \\\"hello\\\"'",
      "input": {},
      "expect": [{"type": "string", "value": "say \"hello\""}]
    },
    {
      "name": "string: escape backtick",
      "expr": "'code \\`block\\`'",
      "input": {},
      "expect": [{"type": "string", "value": "code `block`"}]
    },
    {
      "name": "string: escape backslash",
      "expr": "'path\\\\to\\\\file'",
      "input": {},
      "expect": [{"type": "string", "value": "path\\to\\file"}]
    },
    {
      "name": "string: escape tab",
      "expr": "'a\\tb'",
      "input": {},
      "expect": [{"type": "string", "value": "a\tb"}]
    },
    {
      "name": "string: escape newline",
      "expr": "'line1\\nline2'",
      "input": {},
      "expect": [{"type": "string", "value": "line1\nline2"}]
    },
    {
      "name": "string: escape carriage return",
      "expr": "'a\\rb'",
      "input": {},
      "expect": [{"type": "string", "value": "a\rb"}]
    },
    {
      "name": "string: escape form feed",
      "expr": "'a\\fb'",
      "input": {},
      "expect": [{"type": "string", "value": "a\fb"}]
    },
    {
      "name": "string: unicode escape basic",
      "expr": "'\\u0041'",
      "input": {},
      "expect": [{"type": "string", "value": "A"}],
      "comment": "U+0041 is uppercase A"
    },
    {
      "name": "string: unicode escape asterisk",
      "expr": "'\\u002a'",
      "input": {},
      "expect": [{"type": "string", "value": "*"}],
      "comment": "U+002A is asterisk"
    },
    {
      "name": "string: unicode escape uppercase hex",
      "expr": "'\\u002A'",
      "input": {},
      "expect": [{"type": "string", "value": "*"}],
      "comment": "Hex digits can be uppercase"
    },
    {
      "name": "string: unicode escape null character",
      "expr": "'a\\u0000b'",
      "input": {},
      "expect": [{"type": "string", "value": "a\u0000b"}],
      "comment": "U+0000 is null character"
    },
    {
      "name": "string: unrecognized escape drops backslash",
      "expr": "'\\p'",
      "input": {},
      "expect": [{"type": "string", "value": "p"}],
      "comment": "Spec: backslash is ignored for non-escape sequences"
    },
    {
      "name": "string: unrecognized escape with digit",
      "expr": "'\\3'",
      "input": {},
      "expect": [{"type": "string", "value": "3"}],
      "comment": "Spec example: \\3 → 3"
    },
    {
      "name": "string: incomplete unicode escape",
      "expr": "'\\u005'",
      "input": {},
      "expect": [{"type": "string", "value": "u005"}],
      "comment": "Spec example: \\u005 → u005 (not 4 hex digits)"
    },
    {
      "name": "string: trailing backslash escape impossible",
      "expr": "'test\\'",
      "input": {},
      "expect_error": true,
      "comment": "A trailing backslash escapes the closing quote, making this unterminated. The spec example '\\' → '' is from CQL define context, not valid standalone FHIRPath."
    },
    {
      "name": "string: backslash followed by backslash-p",
      "expr": "'\\\\p'",
      "input": {},
      "expect": [{"type": "string", "value": "\\p"}],
      "comment": "Spec example: \\\\p → \\p"
    },
    {
      "name": "string: multiple escapes combined",
      "expr": "'\\\\/\\f\\r\\n\\t\\\"\\`\\''",
      "input": {},
      "expect": [{"type": "string", "value": "\\/\f\r\n\t\"`'"}],
      "comment": "All standard escapes in sequence"
    },
    {
      "name": "integer: zero",
      "expr": "0",
      "input": {},
      "expect": [{"type": "integer", "value": 0}]
    },
    {
      "name": "integer: positive",
      "expr": "45",
      "input": {},
      "expect": [{"type": "integer", "value": 45}]
    },
    {
      "name": "integer: negative (unary negation)",
      "expr": "-5",
      "input": {},
      "expect": [{"type": "integer", "value": -5}]
    },
    {
      "name": "integer: max 32-bit",
      "expr": "2147483647",
      "input": {},
      "expect": [{"type": "integer", "value": 2147483647}]
    },
    {
      "name": "integer: min 32-bit",
      "expr": "-2147483648",
      "input": {},
      "expect": [{"type": "integer", "value": -2147483648}]
    },
    {
      "name": "long: zero",
      "expr": "0L",
      "input": {},
      "expect": [{"type": "long", "value": 0}]
    },
    {
      "name": "long: positive",
      "expr": "45L",
      "input": {},
      "expect": [{"type": "long", "value": 45}]
    },
    {
      "name": "long: negative (unary negation)",
      "expr": "-5L",
      "input": {},
      "expect": [{"type": "long", "value": -5}]
    },
    {
      "name": "long: beyond 32-bit range",
      "expr": "9223372036854775807L",
      "input": {},
      "expect": [{"type": "long", "value": 9223372036854775807}]
    },
    {
      "name": "decimal: zero with fraction",
      "expr": "0.0",
      "input": {},
      "expect": [{"type": "decimal", "value": "0.0"}]
    },
    {
      "name": "decimal: pi approximation",
      "expr": "3.14159265",
      "input": {},
      "expect": [{"type": "decimal", "value": "3.14159265"}]
    },
    {
      "name": "decimal: negative",
      "expr": "-2.5",
      "input": {},
      "expect": [{"type": "decimal", "value": "-2.5"}]
    },
    {
      "name": "decimal: leading zero",
      "expr": "0.123",
      "input": {},
      "expect": [{"type": "decimal", "value": "0.123"}]
    },
    {
      "name": "date: full date",
      "expr": "@2014-01-25",
      "input": {},
      "expect": [{"type": "date", "value": "2014-01-25"}]
    },
    {
      "name": "date: year-month only",
      "expr": "@2014-01",
      "input": {},
      "expect": [{"type": "date", "value": "2014-01"}]
    },
    {
      "name": "date: year only",
      "expr": "@2014",
      "input": {},
      "expect": [{"type": "date", "value": "2014"}]
    },
    {
      "name": "time: hour and minute",
      "expr": "@T12:00",
      "input": {},
      "expect": [{"type": "time", "value": "12:00"}]
    },
    {
      "name": "time: with seconds",
      "expr": "@T14:30:14",
      "input": {},
      "expect": [{"type": "time", "value": "14:30:14"}]
    },
    {
      "name": "time: with milliseconds",
      "expr": "@T14:30:14.559",
      "input": {},
      "expect": [{"type": "time", "value": "14:30:14.559"}]
    },
    {
      "name": "datetime: full with milliseconds",
      "expr": "@2014-01-25T14:30:14.559",
      "input": {},
      "expect": [{"type": "dateTime", "value": "2014-01-25T14:30:14.559"}]
    },
    {
      "name": "datetime: with Z timezone",
      "expr": "@2014-01-25T14:30:14.559Z",
      "input": {},
      "expect": [{"type": "dateTime", "value": "2014-01-25T14:30:14.559Z"}]
    },
    {
      "name": "datetime: with positive timezone",
      "expr": "@2014-01-25T14:30:14+05:30",
      "input": {},
      "expect": [{"type": "dateTime", "value": "2014-01-25T14:30:14+05:30"}]
    },
    {
      "name": "datetime: with negative timezone",
      "expr": "@2014-01-25T14:30:14-08:00",
      "input": {},
      "expect": [{"type": "dateTime", "value": "2014-01-25T14:30:14-08:00"}]
    },
    {
      "name": "datetime: partial year only",
      "expr": "@2014T",
      "input": {},
      "expect": [{"type": "dateTime", "value": "2014T"}],
      "comment": "Trailing T indicates DateTime, not Date"
    },
    {
      "name": "datetime: partial year-month",
      "expr": "@2014-01T",
      "input": {},
      "expect": [{"type": "dateTime", "value": "2014-01T"}]
    },
    {
      "name": "datetime: partial year-month-day",
      "expr": "@2014-03-25T",
      "input": {},
      "expect": [{"type": "dateTime", "value": "2014-03-25T"}]
    },
    {
      "name": "quantity: decimal with UCUM unit",
      "expr": "4.5 'mg'",
      "input": {},
      "expect": [{"type": "Quantity", "value": {"value": 4.5, "unit": "mg"}}]
    },
    {
      "name": "quantity: integer with UCUM unit",
      "expr": "100 '[degF]'",
      "input": {},
      "expect": [{"type": "Quantity", "value": {"value": 100, "unit": "[degF]"}}],
      "comment": "Integer is implicitly converted to Decimal"
    },
    {
      "name": "quantity: calendar duration singular",
      "expr": "1 year",
      "input": {},
      "expect": [{"type": "Quantity", "value": {"value": 1, "unit": "year"}}]
    },
    {
      "name": "quantity: calendar duration plural",
      "expr": "4 days",
      "input": {},
      "expect": [{"type": "Quantity", "value": {"value": 4, "unit": "day"}}],
      "comment": "Plural form normalizes to singular in unit"
    },
    {
      "name": "empty collection literal",
      "expr": "{}",
      "input": {},
      "expect": []
    },
    {
      "name": "empty collection in expression",
      "expr": "{}.count()",
      "input": {},
      "expect": [{"type": "integer", "value": 0}]
    }
  ]
}
